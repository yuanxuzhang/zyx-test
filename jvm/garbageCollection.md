## 垃圾回收器  
两个任务  
* 内存回收 当一个对象不再被程序所引用时，它所使用的对空间可以被回收，以便被后续的新对象使用。两部：**断定不被引用的对象** **回收对象**。在释放不再被引用的对象过程中，垃圾收集器运行将要被释放对象的终结方法（finalizer）。  
* 处理堆碎片 堆内闲置的空间介于活动的对象之间。  
### 垃圾收集算法  
#### 检测垃圾对象  
通过建立一个根对象的**集合**并检测从这些根对象开始的可触及性来实现。根对象总是可以访问的，从这些根对象开始，任何可以被触及的对象都被认为是“活动”的对象。无法触及的对象被认为是垃圾，因为它们不再影响程序的未来执行。  
根对象包含：  
* 局部变量中的对象引用和栈帧的操作数栈（以及类变量中的对象引用）  
* 被加载的类的常量池中的对象引用，比如字符串。常量池可能指向保存在堆中的字符串，比如类名字，超类的名字，接口的名字，字段名等。  
* 传递到本地方法中的、没有被本地方法“释放”的引用对象。  
* Java虚拟机运行时数据器中从垃圾收集器的堆中分配的部分。 

区分活动对象和垃圾对象的两个基本方法是**引用计数**和**跟踪**  
* 引用计数 通过为堆中的每个对象保存一个计数来区分活动对象和垃圾对象。这个计数记录了对那个对象的引用次数。  
* 跟踪     追踪从根节点开始的引用图。在追踪中遇到的对象以某种方式打上标记，当追踪结束时，没有打上标记的对象就被判定是不可触及的，可以被当做垃圾收集。


#### 垃圾对象内存返还程序  

